<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="In-Depth IATF Premier Stats">
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" type="image/ico" href="/favicon.ico">

    {{#title}}<title>{{title}} &bull; Axe Charts</title>{{/title}}
    {{^title}}<title>Axe Charts</title>{{/title}}

    <style>/*stylesheet*/</style>
    <script>/*chartJS*/</script>
    <script>
      Chart.defaults.aspectRatio = 2;
      Chart.defaults.plugins.legend.display = false;
      Chart.defaults.plugins.tooltip.enabled = false;
      Chart.overrides.doughnut.cutout = '80%';

      const cssVar = (name) => getComputedStyle(document.body).getPropertyValue(`--${name}`);

      const statArc = (id, total, value) => {
        new Chart(document.getElementById(id), {
          type: 'doughnut',
          options: {
            rotation: -90,
            circumference: 180,
            aspectRatio: 3,
          },
          data: {
            datasets: [{
              backgroundColor: [cssVar('main'), cssVar('neutral')],
              data: [value, total - value]
            }]
          }
        });
      };
    </script>
  </head>
  <body>
    <header class="bg-white">
      <div class="x-limit grid columns-fill-auto items-y-center">
        <div>
          <a class="text-h3" href="/">Axe Charts</a>
        </div>

        <div>
          <button data-set="menu.hidden.false">Menu</button>
        </div>
      </div>

      <div class="x-limit grid columns-3 bg-dark text-center" data-id="menu" data-hiddenz>
        <p>
          <a href="/about">About</a>
        </p>

        <p>
          <a href="/badges">Badges</a>
        </p>

        <p>
          <a href="/rating-system">Rating System</a>
        </p>
      </div>
    </header>

    <main>
      {{>page}}
    </main>

    <footer class="bg-dark text-right">
      <div class="x-limit">
        <h2>Axe Charts</h2>

        <p>
          <a href="/about">About</a>
        </p>

        <p>
          <a href="/badges">Badges</a>
        </p>

        <p>
          <a href="/rating-system">Rating System</a>
        </p>

        <p>
          <a class="text-white" href="mailto:info@axecharts.com">info@axecharts.com</a>
        </p>
      </div>
    </footer>

    <script>
      [...document.querySelectorAll('[data-set]')].forEach(element => {
        element.addEventListener('click', () => {
          const [id, key, value] = element.dataset.set.split('.');

          [...document.querySelectorAll(`[data-id='${id}']`)].forEach(target => {
            target.dataset[key] = value;
          });
        });
      });
    </script>
  </body>
</html>