<script>
  const DATA = {{{JSON}}};
  const STATE = {
    profiles: [],
    search(text) {
      this.profiles = text.length === 0 ? [] : DATA.filter(({ name }) => {
        return name.toLowerCase().includes(text.toLowerCase());
      });
    }
  };
</script>

<section>
  <div class="x-limit">
    <h2>NOTICE</h2>

    <p>This website is still under construction. Only the top 10 Premier throwers have profile pages right now. All other profiles will be added soon.</p>
  </div>
</section>

<section class="bg-main">
  <div class="x-limit">
    <h2>Global Rankings</h2>

    <div class="split stack">
      <div class="card grow">
        <h3>IATF Premier</h3>

        <ul>
          <li>
            <strong class="no-break">{{premier.count}}</strong>
            <span>throwers</span>
          </li>

          <li>
            <strong class="no-break">{{premier.averageRating}}</strong>
            <span>average Collins Rating</span>
          </li>

          <li>
            <strong class="no-break">{{premier.averageScore}}</strong>
            <span>average score</span>
          </li>
        </ul>

        <p class="text-center">
          <a class="button" href="/premier">View Ranking</a>
        </p>
      </div>

      <div class="card grow">
        <h3>IATF Standard</h3>

        <ul>
          <li>
            <strong class="no-break">{{standard.count}}</strong>
            <span>throwers</span>
          </li>

          <li>
            <strong class="no-break">{{standard.averageRating}}</strong>
            <span>average Collins Rating</span>
          </li>

          <li>
            <strong class="no-break">{{standard.averageScore}}</strong>
            <span>average score</span>
          </li>
        </ul>

        <p class="text-center">
          <a class="button" href="/standard">View Ranking</a>
        </p>
      </div>
    </div>
  </div>
</section>

<section x-data="STATE">
  <div class="x-limit">
    <h2>Find Your Profile</h2>

    <div class="split stack y-center">
      <p>
        <strong>Search</strong>
      </p>

      <div>
        <input type="text" placeholder="Name" @input.debounce.500ms="search($event.target.value)">
      </div>
    </div>

    <ul>
      <template x-for="profile in profiles" :key="profile.id">
        <li>
          <a :href="`/profile/${profile.id}`" x-text="profile.name"></a>
        </li>
      </template>
    </ul>
  </div>
</section>

<section>
  <div class="x-limit">
    <h2>Why another stats website?</h2>

    <p>Axe Charts was created to address three key issues with <a href="https://axescores.com" target="_blank">AxeScores.com</a>:</p>

    <ol>
      <li>Premier stats are not given the same visibility as Standard stats</li>
      <li>The player comparison is broken</li>
      <li>The current charts don't provide much detail on performance trends over time</li>
    </ol>

    <hr>

    <p>
      <strong>Note:</strong>
      <span>All data on this site is pulled from the official IATF source on a weekly basis.</span>
    </p>

    <hr>

    <p class="text-right">
      <span>Total Thrower Count:</span>
      <strong class="no-break">{{totalProfiles}}</strong>
      <br>
      <span>Data Last Updated:</span>
      <strong class="no-break">{{updatedAt}}</strong>
    </p>
  </div>
</section>